"use strict";(function(d){function h(D,E){D.prototype=Object.create(E.prototype);D.prototype.$super=E.prototype}function v(){return[].slice.call(arguments).reduce(function(E,D){return E!==undefined?E:D})}function x(E,D){var F=E-D;switch(g.INTERNAL_ALIGNMENT){case"left":return[0,F];break;case"right":return[F,0];break;case"center":default:return[F/2,F/2];break}}function c(D){return((typeof D)=="string")?new z(D):D}function a(D,E){if(!E){E=function(F){return F}}return D.map(E).reduce(function(G,F){return G+F},0)}function u(D,E){if(!E){E=function(F){return F}}return Math.max.apply(null,D.map(E))}function s(F,E,H){E=E||{};H=H||"";var G=document.createElementNS("http://www.w3.org/2000/svg",F);for(var D in E){if(D==="xlink:href"){G.setAttributeNS("http://www.w3.org/1999/xlink","href",E[D])}else{G.setAttribute(D,E[D])}}G.textContent=H;return G}function n(E,D,F){if(!(this instanceof n)){return new n(E,D,F)}if(F){this.children=F}else{this.children=[]}this.tagName=E;this.attrs=v(D,{});return this}n.prototype.format=function(D,F,E){};n.prototype.addTo=function(E){if(E instanceof n){E.children.push(this);return this}else{var D=this.toSVG();E.appendChild(D);return D}};n.prototype.escapeString=function(D){return D.replace(/[*_\`\[\]<&]/g,function(E){return"&#"+E.charCodeAt(0)+";"})};n.prototype.toSVG=function(){var D=s(this.tagName,this.attrs);if(typeof this.children=="string"){D.textContent=this.children}else{this.children.forEach(function(E){D.appendChild(E.toSVG())})}return D};n.prototype.toString=function(){var F="<"+this.tagName;var E=this.tagName=="g"||this.tagName=="svg";for(var D in this.attrs){F+=" "+D+'="'+(this.attrs[D]+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")+'"'}F+=">";if(E){F+="\n"}if(typeof this.children=="string"){F+=n.prototype.escapeString(this.children)}else{this.children.forEach(function(G){F+=G})}F+="</"+this.tagName+">\n";return F};function w(D,E){if(!(this instanceof w)){return new w(D,E)}n.call(this,"path");this.attrs.d="M"+D+" "+E}h(w,n);w.prototype.m=function(D,E){this.attrs.d+="m"+D+" "+E;return this};w.prototype.h=function(D){this.attrs.d+="h"+D;return this};w.prototype.right=w.prototype.h;w.prototype.left=function(D){return this.h(-D)};w.prototype.v=function(D){this.attrs.d+="v"+D;return this};w.prototype.down=w.prototype.v;w.prototype.up=function(D){return this.v(-D)};w.prototype.arc=function(F){var D=g.ARC_RADIUS;var G=g.ARC_RADIUS;if(F[0]=="e"||F[1]=="w"){D*=-1}if(F[0]=="s"||F[1]=="n"){G*=-1}if(F=="ne"||F=="es"||F=="sw"||F=="wn"){var E=1}else{var E=0}this.attrs.d+="a"+g.ARC_RADIUS+" "+g.ARC_RADIUS+" 0 0 "+E+" "+D+" "+G;return this};w.prototype.format=function(){this.attrs.d+="h.5";return this};function g(D){if(!(this instanceof g)){return new g([].slice.call(arguments))}n.call(this,"svg",{"class":g.DIAGRAM_CLASS});this.items=D.map(c);this.items.unshift(new l);this.items.push(new k);this.up=this.down=this.height=this.width=0;for(var E=0;E<this.items.length;E++){var F=this.items[E];this.width+=F.width+(F.needsSpace?20:0);this.up=Math.max(this.up,F.up-this.height);this.height+=F.height;this.down=Math.max(this.down-F.height,F.down)}this.formatted=false}h(g,n);for(var m in d){g[m]=d[m]}g.prototype.format=function(D,E,L,G){D=v(D,20);E=v(E,D,20);L=v(L,D,20);G=v(G,E,20);var J=G;var I=D;I+=this.up;var H=n("g",g.STROKE_ODD_PIXEL_LENGTH?{transform:"translate(.5 .5)"}:{});for(var F=0;F<this.items.length;F++){var K=this.items[F];if(K.needsSpace){w(J,I).h(10).addTo(H);J+=10}K.format(J,I,K.width).addTo(H);J+=K.width;I+=K.height;if(K.needsSpace){w(J,I).h(10).addTo(H);J+=10}}this.attrs.width=this.width+G+E;this.attrs.height=this.up+this.height+this.down+D+L;this.attrs.viewBox="0 0 "+this.attrs.width+" "+this.attrs.height;H.addTo(this);this.formatted=true;return this};g.prototype.addTo=function(D){if(!D){var E=document.getElementsByTagName("script");E=E[E.length-1];D=E.parentNode}return this.$super.addTo.call(this,D)};g.prototype.toSVG=function(){if(!this.formatted){this.format()}return this.$super.toSVG.call(this)};g.prototype.toString=function(){if(!this.formatted){this.format()}return this.$super.toString.call(this)};function r(){var E=new g([].slice.call(arguments));var D=E.items;D.shift();D.pop();D.unshift(new l("complex"));D.push(new k("complex"));E.items=D;return E}function i(E){if(!(this instanceof i)){return new i([].slice.call(arguments))}n.call(this,"g");this.items=E.map(c);var D=this.items.length;this.needsSpace=true;this.up=this.down=this.height=this.width=0;for(var F=0;F<this.items.length;F++){var G=this.items[F];this.width+=G.width+(G.needsSpace?20:0);this.up=Math.max(this.up,G.up-this.height);this.height+=G.height;this.down=Math.max(this.down-G.height,G.down)}if(this.items[0].needsSpace){this.width-=10}if(this.items[this.items.length-1].needsSpace){this.width-=10}if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="sequence"}}h(i,n);i.prototype.format=function(D,I,G){var F=x(G,this.width);w(D,I).h(F[0]).addTo(this);w(D+F[0]+this.width,I+this.height).h(F[1]).addTo(this);D+=F[0];for(var E=0;E<this.items.length;E++){var H=this.items[E];if(H.needsSpace&&E>0){w(D,I).h(10).addTo(this);D+=10}H.format(D,I,H.width).addTo(this);D+=H.width;I+=H.height;if(H.needsSpace&&E<this.items.length-1){w(D,I).h(10).addTo(this);D+=10}}return this};function p(D){if(!(this instanceof p)){return new p([].slice.call(arguments))}n.call(this,"g");if(D.length===0){throw new RangeError("Stack() must have at least one child.")}this.items=D.map(c);this.width=Math.max.apply(null,this.items.map(function(F){return F.width+(F.needsSpace?20:0)}));if(this.items[0].needsSpace){this.width-=10}if(this.items[this.items.length-1].needsSpace){this.width-=10}if(this.items.length>1){this.width+=g.ARC_RADIUS*2}this.needsSpace=true;this.up=this.items[0].up;this.down=this.items[this.items.length-1].down;this.height=0;for(var E=0;E<this.items.length;E++){this.height+=this.items[E].height;if(E!==this.items.length-1){this.height+=Math.max(this.items[E].down+g.VERTICAL_SEPARATION,g.ARC_RADIUS*2)+Math.max(this.items[E+1].up+g.VERTICAL_SEPARATION,g.ARC_RADIUS*2)}}if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="stack"}}h(p,n);p.prototype.format=function(E,K,I){var H=x(I,this.width);w(E,K).h(H[0]).addTo(this);E+=H[0];var F=E;if(this.items.length>1){w(E,K).h(g.ARC_RADIUS).addTo(this);E+=g.ARC_RADIUS}for(var G=0;G<this.items.length;G++){var J=this.items[G];var D=this.width-(this.items.length>1?g.ARC_RADIUS*2:0);J.format(E,K,D).addTo(this);E+=D;K+=J.height;if(G!==this.items.length-1){w(E,K).arc("ne").down(Math.max(0,J.down+g.VERTICAL_SEPARATION-g.ARC_RADIUS*2)).arc("es").left(D).arc("nw").down(Math.max(0,this.items[G+1].up+g.VERTICAL_SEPARATION-g.ARC_RADIUS*2)).arc("ws").addTo(this);K+=Math.max(J.down+g.VERTICAL_SEPARATION,g.ARC_RADIUS*2)+Math.max(this.items[G+1].up+g.VERTICAL_SEPARATION,g.ARC_RADIUS*2);E=F+g.ARC_RADIUS}}if(this.items.length>1){w(E,K).h(g.ARC_RADIUS).addTo(this);E+=g.ARC_RADIUS}w(E,K).h(H[1]).addTo(this);return this};function b(E){if(!(this instanceof b)){return new b([].slice.call(arguments))}n.call(this,"g");if(E.length===0){throw new RangeError("OptionalSequence() must have at least one child.")}this.items=E.map(c);this.needsSpace=false;this.width=g.ARC_RADIUS*4;this.up=0;this.height=a(this.items,function(H){return H.height});this.down=this.items[0].down;var D=0;for(var F=0;F<this.items.length;F++){var G=this.items[F];this.up=Math.max(this.up,Math.max(g.ARC_RADIUS*2,G.up+g.VERTICAL_SEPARATION)-D);D+=G.height;if(F>0){this.down=Math.max(this.height+this.down,D+Math.max(g.ARC_RADIUS*2,G.down+g.VERTICAL_SEPARATION))-this.height}this.width+=Math.max(g.ARC_RADIUS*2,G.width+(G.needsSpace?20:0));if(F==0){this.width+=g.ARC_RADIUS}else{if(F==1){this.width+=g.ARC_RADIUS*2}else{if(F<this.items.length-1){this.width+=g.ARC_RADIUS*3}}}}if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="optseq"}}h(b,n);b.prototype.format=function(K,J,D){var G=x(D,this.width);w(K,J).h(G[0]).addTo(this);w(K+G[0]+this.width,J+this.height).h(G[1]).addTo(this);K+=G[0];var F=J-this.up;var L=this.items.length-1;w(K,J).arc("se").up(Math.max(0,this.up-g.ARC_RADIUS*2)).arc("wn").right(this.width-g.ARC_RADIUS*5-this.items[L].width-(this.items[L].needsSpace?20:0)).arc("ne").down(Math.max(0,this.up+this.height-this.items[L].height-g.ARC_RADIUS*2)).arc("ws").addTo(this);for(var H=0;H<this.items.length;H++){var M=this.items[H];var I=M.width+(M.needsSpace?20:0);if(H==0){var E=g.ARC_RADIUS}else{if(H==1){var E=g.ARC_RADIUS*2}else{var E=g.ARC_RADIUS*3}}if(H>0){if(H<L){w(K+E-g.ARC_RADIUS*2,F).arc("ne").down(Math.abs(F-J)-g.ARC_RADIUS*2).arc("ws").addTo(this)}w(K+E-g.ARC_RADIUS*2,J).arc("ne").down(M.height+Math.max(0,M.down+g.VERTICAL_SEPARATION-g.ARC_RADIUS*2)).arc("ws").right(I-g.ARC_RADIUS).arc("se").up(Math.max(0,M.down+g.VERTICAL_SEPARATION-g.ARC_RADIUS*2)).arc("wn").addTo(this)}w(K,J).right(E).addTo(this);K+=E;M.format(K,J,I).addTo(this);K+=I;J+=M.height}w(K,J).right(g.ARC_RADIUS*2).addTo(this);return this};function B(H,D){if(!(this instanceof B)){return new B(H,[].slice.call(arguments,1))}n.call(this,"g");if(typeof H!=="number"||H!==Math.floor(H)){throw new TypeError("The first argument of Choice() must be an integer.")}else{if(H<0||H>=D.length){throw new RangeError("The first argument of Choice() must be an index for one of the items.")}else{this.normal=H}}var I=0;var G=D.length-1;this.items=D.map(c);this.width=Math.max.apply(null,this.items.map(function(J){return J.width}))+g.ARC_RADIUS*4;this.height=this.items[H].height;this.up=this.items[I].up;for(var E=I;E<H;E++){if(E==H-1){var F=g.ARC_RADIUS*2}else{var F=g.ARC_RADIUS}this.up+=Math.max(F,this.items[E].height+this.items[E].down+g.VERTICAL_SEPARATION+this.items[E+1].up)}this.down=this.items[G].down;for(var E=H+1;E<=G;E++){if(E==H+1){var F=g.ARC_RADIUS*2}else{var F=g.ARC_RADIUS}this.down+=Math.max(F,this.items[E-1].height+this.items[E-1].down+g.VERTICAL_SEPARATION+this.items[E].up)}this.down-=this.items[H].height;if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="choice"}}h(B,n);B.prototype.format=function(J,I,E){var F=x(E,this.width);w(J,I).h(F[0]).addTo(this);w(J+F[0]+this.width,I+this.height).h(F[1]).addTo(this);J+=F[0];var K=this.items.length-1;var H=this.width-g.ARC_RADIUS*4;for(var G=this.normal-1;G>=0;G--){var L=this.items[G];if(G==this.normal-1){var D=Math.max(g.ARC_RADIUS*2,this.items[this.normal].up+g.VERTICAL_SEPARATION+L.down+L.height)}w(J,I).arc("se").up(D-g.ARC_RADIUS*2).arc("wn").addTo(this);L.format(J+g.ARC_RADIUS*2,I-D,H).addTo(this);w(J+g.ARC_RADIUS*2+H,I-D+L.height).arc("ne").down(D-L.height+this.height-g.ARC_RADIUS*2).arc("ws").addTo(this);D+=Math.max(g.ARC_RADIUS,L.up+g.VERTICAL_SEPARATION+(G==0?0:this.items[G-1].down+this.items[G-1].height))}w(J,I).right(g.ARC_RADIUS*2).addTo(this);this.items[this.normal].format(J+g.ARC_RADIUS*2,I,H).addTo(this);w(J+g.ARC_RADIUS*2+H,I+this.height).right(g.ARC_RADIUS*2).addTo(this);for(var G=this.normal+1;G<=K;G++){var L=this.items[G];if(G==this.normal+1){var D=Math.max(g.ARC_RADIUS*2,this.height+this.items[this.normal].down+g.VERTICAL_SEPARATION+L.up)}w(J,I).arc("ne").down(D-g.ARC_RADIUS*2).arc("ws").addTo(this);L.format(J+g.ARC_RADIUS*2,I+D,H).addTo(this);w(J+g.ARC_RADIUS*2+H,I+D+L.height).arc("se").up(D-g.ARC_RADIUS*2+L.height-this.height).arc("wn").addTo(this);D+=Math.max(g.ARC_RADIUS,L.height+L.down+g.VERTICAL_SEPARATION+(G==K?0:this.items[G+1].up))}return this};function e(I,F,D){if(!(this instanceof e)){return new e(I,F,[].slice.call(arguments,2))}n.call(this,"g");if(typeof I!=="number"||I!==Math.floor(I)){throw new TypeError("The first argument of MultipleChoice() must be an integer.")}else{if(I<0||I>=D.length){throw new RangeError("The first argument of MultipleChoice() must be an index for one of the items.")}else{this.normal=I}}if(F!="any"&&F!="all"){throw new SyntaxError("The second argument of MultipleChoice must be 'any' or 'all'.")}else{this.type=F}this.needsSpace=true;this.items=D.map(c);this.innerWidth=u(this.items,function(J){return J.width});this.width=30+g.ARC_RADIUS+this.innerWidth+g.ARC_RADIUS+20;this.up=this.items[0].up;this.down=this.items[this.items.length-1].down;this.height=this.items[I].height;for(var E=0;E<this.items.length;E++){var G=this.items[E];if(E==I-1||E==I+1){var H=10+g.ARC_RADIUS}else{var H=g.ARC_RADIUS}if(E<I){this.up+=Math.max(H,G.height+G.down+g.VERTICAL_SEPARATION+this.items[E+1].up)}else{if(E>I){this.down+=Math.max(H,G.up+g.VERTICAL_SEPARATION+this.items[E-1].down+this.items[E-1].height)}}}this.down-=this.items[I].height;if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="multiplechoice"}}h(e,n);e.prototype.format=function(J,I,E){var F=x(E,this.width);w(J,I).right(F[0]).addTo(this);w(J+F[0]+this.width,I+this.height).right(F[1]).addTo(this);J+=F[0];var H=this.items[this.normal];for(var G=this.normal-1;G>=0;G--){var L=this.items[G];if(G==this.normal-1){var D=Math.max(10+g.ARC_RADIUS,H.up+g.VERTICAL_SEPARATION+L.down+L.height)}w(J+30,I).up(D-g.ARC_RADIUS).arc("wn").addTo(this);L.format(J+30+g.ARC_RADIUS,I-D,this.innerWidth).addTo(this);w(J+30+g.ARC_RADIUS+this.innerWidth,I-D+L.height).arc("ne").down(D-L.height+this.height-g.ARC_RADIUS-10).addTo(this);if(G!=0){D+=Math.max(g.ARC_RADIUS,L.up+g.VERTICAL_SEPARATION+this.items[G-1].down+this.items[G-1].height)}}w(J+30,I).right(g.ARC_RADIUS).addTo(this);H.format(J+30+g.ARC_RADIUS,I,this.innerWidth).addTo(this);w(J+30+g.ARC_RADIUS+this.innerWidth,I+this.height).right(g.ARC_RADIUS).addTo(this);for(var G=this.normal+1;G<this.items.length;G++){var L=this.items[G];if(G==this.normal+1){var D=Math.max(10+g.ARC_RADIUS,H.height+H.down+g.VERTICAL_SEPARATION+L.up)}w(J+30,I).down(D-g.ARC_RADIUS).arc("ws").addTo(this);L.format(J+30+g.ARC_RADIUS,I+D,this.innerWidth).addTo(this);w(J+30+g.ARC_RADIUS+this.innerWidth,I+D+L.height).arc("se").up(D-g.ARC_RADIUS+L.height-H.height).addTo(this);if(G!=this.items.length-1){D+=Math.max(g.ARC_RADIUS,L.height+L.down+g.VERTICAL_SEPARATION+this.items[G+1].up)}}var K=n("g",{"class":"diagram-text"}).addTo(this);n("title",{},(this.type=="any"?"take one or more branches, once each, in any order":"take all branches, once each, in any order")).addTo(K);n("path",{d:"M "+(J+30)+" "+(I-10)+" h -26 a 4 4 0 0 0 -4 4 v 12 a 4 4 0 0 0 4 4 h 26 z","class":"diagram-text"}).addTo(K);n("text",{x:J+15,y:I+4,"class":"diagram-text"},(this.type=="any"?"1+":"all")).addTo(K);n("path",{d:"M "+(J+this.width-20)+" "+(I-10)+" h 16 a 4 4 0 0 1 4 4 v 12 a 4 4 0 0 1 -4 4 h -16 z","class":"diagram-text"}).addTo(K);n("path",{d:"M "+(J+this.width-13)+" "+(I-2)+" a 4 4 0 1 0 6 -1 m 2.75 -1 h -4 v 4 m 0 -3 h 2",style:"stroke-width: 1.75"}).addTo(K);return this};function A(E,D){if(D===undefined){return B(1,C(),E)}else{if(D==="skip"){return B(0,C(),E)}else{throw"Unknown value for Optional()'s 'skip' argument."}}}function f(D,E){if(!(this instanceof f)){return new f(D,E)}n.call(this,"g");E=E||(new C);this.item=c(D);this.rep=c(E);this.width=Math.max(this.item.width,this.rep.width)+g.ARC_RADIUS*2;this.height=this.item.height;this.up=this.item.up;this.down=Math.max(g.ARC_RADIUS*2,this.item.down+g.VERTICAL_SEPARATION+this.rep.up+this.rep.height+this.rep.down);if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="oneormore"}}h(f,n);f.prototype.needsSpace=true;f.prototype.format=function(D,H,F){var E=x(F,this.width);w(D,H).h(E[0]).addTo(this);w(D+E[0]+this.width,H+this.height).h(E[1]).addTo(this);D+=E[0];w(D,H).right(g.ARC_RADIUS).addTo(this);this.item.format(D+g.ARC_RADIUS,H,this.width-g.ARC_RADIUS*2).addTo(this);w(D+this.width-g.ARC_RADIUS,H+this.height).right(g.ARC_RADIUS).addTo(this);var G=Math.max(g.ARC_RADIUS*2,this.item.height+this.item.down+g.VERTICAL_SEPARATION+this.rep.up);w(D+g.ARC_RADIUS,H).arc("nw").down(G-g.ARC_RADIUS*2).arc("ws").addTo(this);this.rep.format(D+g.ARC_RADIUS,H+G,this.width-g.ARC_RADIUS*2).addTo(this);w(D+this.width-g.ARC_RADIUS,H+G+this.rep.height).arc("se").up(G-g.ARC_RADIUS*2+this.rep.height-this.item.height).arc("en").addTo(this);return this};function o(E,F,D){return A(f(E,F),D)}function l(D){if(!(this instanceof l)){return new l()}n.call(this,"path");this.width=20;this.height=0;this.up=10;this.down=10;this.type=D||"simple";if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="start"}}h(l,n);l.prototype.format=function(D,E){if(this.type==="complex"){this.attrs.d="M "+D+" "+(E-10)+" v 20 m 0 -10 h 20.5"}else{this.attrs.d="M "+D+" "+(E-10)+" v 20 m 10 -20 v 20 m -10 -10 h 20.5"}return this};function k(D){if(!(this instanceof k)){return new k()}n.call(this,"path");this.width=20;this.height=0;this.up=10;this.down=10;this.type=D||"simple";if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="end"}}h(k,n);k.prototype.format=function(D,E){if(this.type==="complex"){this.attrs.d="M "+D+" "+E+" h 20 m 0 -10 v 20"}else{this.attrs.d="M "+D+" "+E+" h 20 m -10 -10 v 20 m 10 -20 v 20"}return this};function z(E,D){if(!(this instanceof z)){return new z(E,D)}n.call(this,"g",{"class":"terminal"});this.text=E;this.href=D;this.width=E.length*8+20;this.height=0;this.up=11;this.down=11;if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="terminal"}}h(z,n);z.prototype.needsSpace=true;z.prototype.format=function(D,H,F){var E=x(F,this.width);w(D,H).h(E[0]).addTo(this);w(D+E[0]+this.width,H).h(E[1]).addTo(this);D+=E[0];n("rect",{x:D,y:H-11,width:this.width,height:this.up+this.down,rx:10,ry:10}).addTo(this);var G=n("text",{x:D+this.width/2,y:H+4},this.text);if(this.href){n("a",{"xlink:href":this.href},[G]).addTo(this)}else{G.addTo(this)}return this};function j(E,D){if(!(this instanceof j)){return new j(E,D)}n.call(this,"g",{"class":"non-terminal"});this.text=E;this.href=D;this.width=E.length*8+20;this.height=0;this.up=11;this.down=11;if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="nonterminal"}}h(j,n);j.prototype.needsSpace=true;j.prototype.format=function(D,H,F){var E=x(F,this.width);w(D,H).h(E[0]).addTo(this);w(D+E[0]+this.width,H).h(E[1]).addTo(this);D+=E[0];n("rect",{x:D,y:H-11,width:this.width,height:this.up+this.down}).addTo(this);var G=n("text",{x:D+this.width/2,y:H+4},this.text);if(this.href){n("a",{"xlink:href":this.href},[G]).addTo(this)}else{G.addTo(this)}return this};function q(E,D){if(!(this instanceof q)){return new q(E,D)}n.call(this,"g");this.text=E;this.href=D;this.width=E.length*7+10;this.height=0;this.up=11;this.down=11;if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="comment"}}h(q,n);q.prototype.needsSpace=true;q.prototype.format=function(D,H,F){var E=x(F,this.width);w(D,H).h(E[0]).addTo(this);w(D+E[0]+this.width,H+this.height).h(E[1]).addTo(this);D+=E[0];var G=n("text",{x:D+this.width/2,y:H+5,"class":"comment"},this.text);if(this.href){n("a",{"xlink:href":this.href},[G]).addTo(this)}else{G.addTo(this)}return this};function C(){if(!(this instanceof C)){return new C()}n.call(this,"g");this.width=0;this.height=0;this.up=0;this.down=0;if(g.DEBUG){this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down;this.attrs["data-type"]="skip"}}h(C,n);C.prototype.format=function(D,F,E){w(D,F).right(E).addTo(this);return this};var t;if(typeof define==="function"&&define.amd){t={};define([],function(){return t})}else{if(typeof exports==="object"){t=exports}else{t=this}}var y=[g,r,i,p,b,B,e,A,f,o,z,j,q,C];["Diagram","ComplexDiagram","Sequence","Stack","OptionalSequence","Choice","MultipleChoice","Optional","OneOrMore","ZeroOrMore","Terminal","NonTerminal","Comment","Skip"].forEach(function(E,D){t[E]=y[D]})}).call(this,{VERTICAL_SEPARATION:8,ARC_RADIUS:10,DIAGRAM_CLASS:"railroad-diagram",STROKE_ODD_PIXEL_LENGTH:true,INTERNAL_ALIGNMENT:"center",});