!function(e,d){if("function"==typeof define&&define.amd){define("Toposort",["exports","module"],d)}else{if("undefined"!=typeof exports&&"undefined"!=typeof module){d(exports,module)}else{var f={exports:{}};d(f.exports,f),e.Toposort=f.exports}}}(this,function(f,e){function h(d,c){if(!(d instanceof c)){throw new TypeError("Cannot call a class as a function")}}var g=function(){function b(){h(this,b),this.edges=[],this.Toposort=b}return b.prototype.add=function(j,i){if("string"!=typeof j||!j){throw new TypeError("Dependent name must be given as a not empty string")}if(i=Array.isArray(i)?i:[i],i.length>0){for(var o=i,n=Array.isArray(o),m=0,o=n?o:o[Symbol.iterator]();;){var l;if(n){if(m>=o.length){break}l=o[m++]}else{if(m=o.next(),m.done){break}l=m.value}var k=l;if("string"!=typeof k||!k){throw new TypeError("Dependency name must be given as a not empty string")}this.edges.push([j,k])}}else{this.edges.push([j])}return this},b.prototype.sort=function(){for(var P=this,O=[],N=this.edges,M=Array.isArray(N),L=0,N=M?N:N[Symbol.iterator]();;){var K;if(M){if(L>=N.length){break}K=N[L++]}else{if(L=N.next(),L.done){break}K=L.value}for(var J=K,I=J,H=Array.isArray(I),G=0,I=H?I:I[Symbol.iterator]();;){var F;if(H){if(G>=I.length){break}F=I[G++]}else{if(G=I.next(),G.done){break}F=G.value}var E=F;-1===O.indexOf(E)&&O.push(E)}}for(var D=O.length,C=new Array(O.length),B=function v(s,r){if(0!==r.length&&-1!==r.indexOf(s)){throw new Error("Cyclic dependency found. "+s+" is dependent of itself.\nDependency chain: "+r.join(" -> ")+" => "+s)}var q=O.indexOf(s);if(-1!==q){var p=!1;O[q]=!1;for(var o=P.edges,n=Array.isArray(o),m=0,o=n?o:o[Symbol.iterator]();;){var l;if(n){if(m>=o.length){break}l=o[m++]}else{if(m=o.next(),m.done){break}l=m.value}var a=l;a[0]===s&&(p=p||r.concat([s]),v(a[1],p))}C[--D]=s}},A=0;A<O.length;A++){var E=O[A];if(E!==!1){O[A]=!1;for(var z=this.edges,y=Array.isArray(z),x=0,z=y?z:z[Symbol.iterator]();;){var w;if(y){if(x>=z.length){break}w=z[x++]}else{if(x=z.next(),x.done){break}w=x.value}var J=w;J[0]===E&&B(J[1],[E])}C[--D]=E}}return C},b.prototype.clear=function(){return this.edges=[],this},b}();e.exports=g});