(function(b,a){if(typeof define==="function"&&define.amd){define(function(){return a(b,b.document)})}else{if(typeof module!=="undefined"&&module.exports){module.exports=a(b,b.document)}else{b.Notify=a(b,b.document)}}}(typeof window!=="undefined"?window:this,function(a,f){var e=a.Notification;function c(d){return typeof d==="function"}function b(h,d){if(typeof h!=="string"){throw new Error("Notify(): first arg (title) must be a string.")}this.title=h;this.options={icon:"",body:"",tag:"",lang:"en",notifyShow:null,notifyClose:null,notifyClick:null,notifyError:null,timeout:null};this.permission=null;if(typeof d==="object"){for(var g in d){if(d.hasOwnProperty(g)){this.options[g]=d[g]}}if(c(this.options.notifyShow)){this.onShowCallback=this.options.notifyShow}if(c(this.options.notifyClose)){this.onCloseCallback=this.options.notifyClose}if(c(this.options.notifyClick)){this.onClickCallback=this.options.notifyClick}if(c(this.options.notifyError)){this.onErrorCallback=this.options.notifyError}}}b.isSupported=function(d){if(!e||!e.requestPermission){return false}if(d==="granted"||e.permission==="granted"){throw new Error("You must only call this before calling Notification.requestPermission(), otherwise this feature detect would trigger an actual notification!")}try{new e("")}catch(g){if(g.name==="TypeError"){return false}}return true};b.needsPermission=(e&&e.permission&&e.permission==="granted")?false:true;b.requestPermission=function(g,d){e.requestPermission(function(h){switch(h){case"granted":b.needsPermission=false;if(c(g)){g()}break;case"denied":b.needsPermission=true;if(c(d)){d()}break}})};b.prototype.show=function(){this.myNotify=new e(this.title,{body:this.options.body,tag:this.options.tag,icon:this.options.icon,lang:this.options.lang});if(this.options.timeout&&!isNaN(this.options.timeout)){setTimeout(this.close.bind(this),this.options.timeout*1000)}this.myNotify.addEventListener("show",this,false);this.myNotify.addEventListener("error",this,false);this.myNotify.addEventListener("close",this,false);this.myNotify.addEventListener("click",this,false)};b.prototype.onShowNotification=function(d){if(this.onShowCallback){this.onShowCallback(d)}};b.prototype.onCloseNotification=function(d){if(this.onCloseCallback){this.onCloseCallback(d)}this.destroy()};b.prototype.onClickNotification=function(d){if(this.onClickCallback){this.onClickCallback(d)}};b.prototype.onErrorNotification=function(d){if(this.onErrorCallback){this.onErrorCallback(d)}this.destroy()};b.prototype.destroy=function(){this.myNotify.removeEventListener("show",this,false);this.myNotify.removeEventListener("error",this,false);this.myNotify.removeEventListener("close",this,false);this.myNotify.removeEventListener("click",this,false)};b.prototype.close=function(){this.myNotify.close()};b.prototype.handleEvent=function(d){switch(d.type){case"show":this.onShowNotification(d);break;case"close":this.onCloseNotification(d);break;case"click":this.onClickNotification(d);break;case"error":this.onErrorNotification(d);break}};return b}));